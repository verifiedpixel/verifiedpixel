<div class="metadata-view">

  <div class="vpp-card">
    <p class="question-text">TAGS</p>
    <div ng-repeat="tagId in item.vpp_tag">
      <p class="answer-text">
        {{ vppTags[tagId] }}
        <a ng-click="removeTag(item, tagId)">x</a>
      </p>
    </div>
    <div class="btn-group" dropdown is-open="status.isopen">
      <button id="single-button" type="button" class="btn" dropdown-toggle ng-disabled="disabled" translate>
        +
      </button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="single-button">
        <div ng-repeat="(tagCode, tagName) in vppTags">
          <li role="menuitem"><a ng-click="addTag(item, tagCode)">{{tagName}}</a></li>
        </div>
      </ul>
    </div>
  </div>

  <div class="notification-list-box" ng-controller="CommentsWidgetCtrl">
    <ul class="notification-list white">
      <li ng-repeat="comment in comments" ng-class="{active: comment._id === active}">
        <figure class="avatar">
          <img sd-user-avatar data-src="comment.user.picture_url">
        </figure>
        <div class="content">
          <div class="text" sd-comment-text data-comment="comment" data-name="{{comment.user.display_name || comment.user.username}}" data-text="{{comment.text}}"></div>
          <span class="date" sd-reldate ng-model="comment._created"></span>
        </div>
      </li>

      <li class="alert alert-info" ng-show="comments.length === 0" translate>No comments so far. Be the first..</li>
      <li class="alert alert-info" ng-show="comments === null" translate>Loading..</li>
    </ul>
    <div class="add-comment">
      <form name="commentsForm">
        <div vp-user-mentio></div>
        <textarea class="new-comment" sd-auto-height ng-model="text" mentio id="mentio-users" ng-keyup="saveOnEnter($event)"></textarea>
        <div class="actions">
          <div class="pull-left post">
            <input type="checkbox" ng-model="saveEnterFlag"> <span translate>Post on 'Enter'</span></div>
          <button class="btn btn-info pull-right" ng-click="save()" ng-show="!saveEnterFlag" translate>Post</button>
          <button class="btn pull-right" ng-click="cancel()" ng-show="!saveEnterFlag" translate>Cancel</button>
        </div>
      </form>
    </div>
  </div>

</div>
